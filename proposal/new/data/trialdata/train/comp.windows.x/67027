 from yang cs umass edu hong yang subject colormap question organization university of massachusetts amherst lines one three nine nntp posting host freya cs umass edu hi experts i m kind of new to x the following question is strange to me i am trying to modify the contents of the colormap but failed without reason to me i am using the following piece of code toplevel xtinitialize argv zero testcolor null zero dpy xtdisplay toplevel scr defaultscreen dpy def colormap defaultcolormap dpy scr if xalloccolorcells dpy def colormap true null zero cells five else printf n error couldn t allocate color cells running output try to allocate the color seven as two five zero one two five zero after allocate the color seven is zero zero zero after xstorecolor xquerycolor just returned the original value no failure error displayed but the contents of colormap are obvious unchanged i also tried to draw a line using the colors but it turned out to be the unmodified colors so what is my problem how to modify the contents of the colormap any help information will be appreciated please send mail to yang cs umass edu william email yang cs umass edu by the way the following is the environment i am using output of xdpyinfo it shows the default visual is pseudocolor version number one one zero vendor string decwindows digitalequipmentcorporation uws four two vendor release number one maximum request size one six three eight four longwords six five five three six bytes motion buffer size one zero zero bitmap unit bit order padding three two lsbfirst three two image byte order lsbfirst number of supported pixmap formats two supported pixmap formats depth one bits per pixel one scanline pad three two depth eight bits per pixel eight scanline pad three two keycode range minimum eight six maximum two five one number of extensions eight adobe dps extension dpsextension shape mit shm multi buffering xinputextension mit sundry nonstandard dec xtrap default screen number zero number of screens one screen zero dimensions one zero two four x eight six four pixels three three three x two eight one millimeters resolution seven eight x seven eight dots per inch depths two one eight root window id zero x two nine depth of root window eight planes number of colormaps minimum one maximum one default colormap zero x two seven default number of colormap cells two five six preallocated pixels black one white zero options backing store yes save unders yes current input event mask zero xd zero zero zero one d keypressmask buttonpressmask buttonreleasemask enterwindowmask substructureredirectmask propertychangemask colormapchangemask number of visuals five default visual id zero x two one visual visual id zero x two one class pseudocolor depth eight planes size of colormap two five six entries red green blue masks zero x zero zero x zero zero x zero significant bits in color specification eight bits visual visual id zero x two two class grayscale depth eight planes size of colormap two five six entries red green blue masks zero x zero zero x zero zero x zero significant bits in color specification eight bits visual visual id zero x two three class staticgray depth eight planes size of colormap two five six entries red green blue masks zero x zero zero x zero zero x zero significant bits in color specification eight bits visual visual id zero x two four class staticcolor depth eight planes size of colormap two five six entries red green blue masks zero x seven zero x three eight zero xc zero significant bits in color specification eight bits visual visual id zero x two five class truecolor depth eight planes size of colormap eight entries red green blue masks zero x seven zero x three eight zero xc zero significant bits in color specification eight bits number of mono multibuffer types five visual id max buffers depth zero x two one zero eight visual id max buffers depth zero x two two zero eight visual id max buffers depth zero x two three zero eight visual id max buffers depth zero x two four zero eight visual id max buffers depth zero x two five zero eight number of stereo multibuffer types zero